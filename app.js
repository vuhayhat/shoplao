const translations = {
  vi: {
    home: {
      title: "Ch√†o m·ª´ng ƒë·∫øn v·ªõi Th∆∞∆°ng M·∫°i ƒêi·ªán T·ª≠ ƒêa Qu·ªëc Gia!",
      desc: `D·ª± √°n h·ªó tr·ª£ ƒëa ng√¥n ng·ªØ, AI ph√¢n t√≠ch s·∫£n ph·∫©m, qu·∫£n l√Ω shop c√° nh√¢n, thanh to√°n linh ho·∫°t v√† nhi·ªÅu t√≠nh nƒÉng hi·ªán ƒë·∫°i.`
    },
    shop: {
      title: "Trang c√° nh√¢n Shop",
      desc: "Xem th√¥ng tin shop, s·∫£n ph·∫©m, ƒë√°nh gi√° v√† chia s·∫ª m·∫°ng x√£ h·ªôi."
    },
    register: {
      title: "ƒêƒÉng k√Ω m·ªü Shop",
      desc: "T·∫°o t√†i kho·∫£n, ƒëƒÉng k√Ω shop, ch·ªù duy·ªát v√† qu·∫£n l√Ω c·ª≠a h√†ng ri√™ng."
    },
    products: {
      title: "Qu·∫£n l√Ω S·∫£n ph·∫©m",
      desc: "Th√™m, s·ª≠a, xo√° s·∫£n ph·∫©m, m√¥ t·∫£ ƒëa ng√¥n ng·ªØ, ch·ªânh s·ª≠a ·∫£nh b·∫±ng AI."
    },
    cart: {
      title: "Gi·ªè h√†ng & Thanh to√°n",
      desc: "H·ªó tr·ª£ nhi·ªÅu ph∆∞∆°ng th·ª©c thanh to√°n, theo d√µi ƒë∆°n h√†ng, giao h√†ng."
    },
    ai: {
      title: "Ph√¢n t√≠ch s·∫£n ph·∫©m b·∫±ng AI",
      desc: "AI t·∫°o m√¥ t·∫£, g·ª£i √Ω t·ª´ kho√° SEO, ph√¢n t√≠ch ·∫£nh, ch·∫•m ƒëi·ªÉm s·∫£n ph·∫©m."
    },
    statistic: {
      title: "Th·ªëng k√™ t·ªïng quan",
      desc: "Xem t·ªïng s·ªë ƒë∆°n, s·∫£n ph·∫©m ƒë√£ b√°n, thu nh·∫≠p, kh√°ch h√†ng v√† s·∫£n ph·∫©m b√°n ch·∫°y."
    }
  },
  en: {
    home: {
      title: "Welcome to the Multi-National E-Commerce Platform!",
      desc: `The project supports multi-language, AI product analysis, personal shop management, flexible payment, and more modern features.`
    },
    shop: {
      title: "Personal Shop Page",
      desc: "View shop info, products, ratings, and social sharing."
    },
    register: {
      title: "Register a Shop",
      desc: "Create an account, register a shop, wait for approval, and manage your store."
    },
    products: {
      title: "Product Management",
      desc: "Add, edit, delete products, multilingual descriptions, AI image editing."
    },
    cart: {
      title: "Cart & Payment",
      desc: "Support multiple payment methods, order tracking, delivery."
    },
    ai: {
      title: "AI Product Analysis",
      desc: "AI generates descriptions, SEO keyword suggestions, image analysis, product scoring."
    },
    statistic: {
      title: "Statistics Overview",
      desc: "View total orders, sold products, income, customers, and best-selling products."
    }
  },
  lo: {
    home: {
      title: "‡∫ç‡∫¥‡∫ô‡∫î‡∫µ‡∫ï‡ªâ‡∫≠‡∫ô‡∫Æ‡∫±‡∫ö‡∫™‡∫π‡ªà‡ªÅ‡∫û‡∫•‡∫î‡∫ü‡∫≠‡∫°‡∫û‡∫≤‡∫ô‡∫¥‡∫î‡∫≠‡∫¥‡∫ô‡ªÄ‡∫ï‡∫µ‡ªÄ‡∫ô‡∫±‡∫î‡∫´‡∫º‡∫≤‡∫ç‡∫ä‡∫≤‡∫î!",
      desc: `‡ªÇ‡∫Ñ‡∫á‡∫Å‡∫≤‡∫ô‡∫Æ‡∫≠‡∫á‡∫Æ‡∫±‡∫ö‡∫´‡∫º‡∫≤‡∫ç‡∫û‡∫≤‡∫™‡∫≤, AI ‡∫ß‡∫¥‡ªÄ‡∫Ñ‡∫≤‡∫∞‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤, ‡∫ö‡ªç‡∫•‡∫¥‡∫´‡∫≤‡∫ô‡∫Æ‡ªâ‡∫≤‡∫ô‡∫™‡ªà‡∫ß‡∫ô‡∫ï‡∫ª‡∫ß, ‡∫Å‡∫≤‡∫ô‡∫à‡ªà‡∫≤‡∫ç‡ªÄ‡∫á‡∫¥‡∫ô‡∫´‡∫º‡∫≤‡∫ç‡∫Æ‡∫π‡∫ö‡ªÅ‡∫ö‡∫ö ‡ªÅ‡∫•‡∫∞‡∫≠‡∫∑‡ªà‡∫ô‡ªÜ.`
    },
    shop: {
      title: "‡ªú‡ªâ‡∫≤‡∫Æ‡ªâ‡∫≤‡∫ô‡∫™‡ªà‡∫ß‡∫ô‡∫ï‡∫ª‡∫ß",
      desc: "‡ªÄ‡∫ö‡∫¥‡ªà‡∫á‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫Æ‡ªâ‡∫≤‡∫ô, ‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤, ‡∫Å‡∫≤‡∫ô‡∫õ‡∫∞‡ªÄ‡∫°‡∫µ‡∫ô, ‡ªÅ‡∫•‡∫∞‡∫Å‡∫≤‡∫ô‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô‡∫™‡∫∑‡ªà‡∫™‡∫±‡∫á‡∫Ñ‡∫ª‡∫°."
    },
    register: {
      title: "‡∫•‡∫ª‡∫á‡∫ó‡∫∞‡∫ö‡∫Ω‡∫ô‡ªÄ‡∫õ‡∫µ‡∫î‡∫Æ‡ªâ‡∫≤‡∫ô",
      desc: "‡∫™‡ªâ‡∫≤‡∫á‡∫ö‡∫±‡∫ô‡∫ä‡∫µ, ‡∫•‡∫ª‡∫á‡∫ó‡∫∞‡∫ö‡∫Ω‡∫ô‡∫Æ‡ªâ‡∫≤‡∫ô, ‡∫•‡ªç‡∫ñ‡ªâ‡∫≤‡∫≠‡∫∞‡∫ô‡∫∏‡∫°‡∫±‡∫î, ‡ªÅ‡∫•‡∫∞‡∫ö‡ªç‡∫•‡∫¥‡∫´‡∫≤‡∫ô‡∫Æ‡ªâ‡∫≤‡∫ô."
    },
    products: {
      title: "‡∫Å‡∫≤‡∫ô‡∫à‡∫±‡∫î‡∫Å‡∫≤‡∫ô‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤",
      desc: "‡ªÄ‡∫û‡∫µ‡ªà‡∫°, ‡ªÅ‡∫Å‡ªâ‡ªÑ‡∫Ç, ‡∫•‡∫∂‡∫ö‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤, ‡∫Ñ‡∫≥‡∫≠‡∫∞‡∫ó‡∫¥‡∫ö‡∫≤‡∫ç‡∫´‡∫º‡∫≤‡∫ç‡∫û‡∫≤‡∫™‡∫≤, ‡ªÅ‡∫Å‡ªâ‡ªÑ‡∫Ç‡∫Æ‡∫π‡∫ö‡∫û‡∫≤‡∫ö AI."
    },
    cart: {
      title: "‡∫Å‡∫∞‡∫ï‡ªà‡∫≤ & ‡∫Å‡∫≤‡∫ô‡∫à‡ªà‡∫≤‡∫ç‡ªÄ‡∫á‡∫¥‡∫ô",
      desc: "‡∫Æ‡∫≠‡∫á‡∫Æ‡∫±‡∫ö‡∫ß‡∫¥‡∫ó‡∫µ‡∫à‡ªà‡∫≤‡∫ç‡ªÄ‡∫á‡∫¥‡∫ô‡∫´‡∫º‡∫≤‡∫ç‡∫Æ‡∫π‡∫ö‡ªÅ‡∫ö‡∫ö, ‡∫ï‡∫¥‡∫î‡∫ï‡∫≤‡∫°‡∫Ñ‡∫≥‡∫™‡∫±‡ªà‡∫á, ‡∫Å‡∫≤‡∫ô‡∫à‡∫±‡∫î‡∫™‡∫ª‡ªà‡∫á."
    },
    ai: {
      title: "AI ‡∫ß‡∫¥‡ªÄ‡∫Ñ‡∫≤‡∫∞‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤",
      desc: "AI ‡∫™‡ªâ‡∫≤‡∫á‡∫Ñ‡∫≥‡∫≠‡∫∞‡∫ó‡∫¥‡∫ö‡∫≤‡∫ç, ‡ªÅ‡∫ô‡∫∞‡∫ô‡∫≥‡∫Ñ‡∫≥‡∫™‡∫≥‡∫Ñ‡∫±‡∫ô SEO, ‡∫ß‡∫¥‡ªÄ‡∫Ñ‡∫≤‡∫∞‡∫Æ‡∫π‡∫ö, ‡∫õ‡∫∞‡ªÄ‡∫°‡∫µ‡∫ô‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤."
    },
    statistic: {
      title: "‡∫™‡∫∞‡∫ñ‡∫¥‡∫ï‡∫¥‡∫û‡∫≤‡∫ö‡∫•‡∫ß‡∫°",
      desc: "‡ªÄ‡∫ö‡∫¥‡ªà‡∫á‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡∫Ñ‡∫≥‡∫™‡∫±‡ªà‡∫á, ‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤‡∫ó‡∫µ‡ªà‡∫Ç‡∫≤‡∫ç‡ªÑ‡∫î‡ªâ, ‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö, ‡∫•‡∫π‡∫Å‡∫Ñ‡ªâ‡∫≤ ‡ªÅ‡∫•‡∫∞‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤‡∫Ç‡∫≤‡∫ç‡∫î‡∫µ."
    }
  }
};

const demoProducts = [
  {
    name: "√Åo thun nam basic",
    img: "https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=400&q=80",
    price: 199000,
    status: "ƒêang b√°n"
  },
  {
    name: "Qu·∫ßn jeans n·ªØ",
    img: "https://images.unsplash.com/photo-1516762689617-f5e6b9cfd2c1?auto=format&fit=crop&w=400&q=80",
    price: 299000,
    status: "H·∫øt h√†ng"
  },
  {
    name: "Gi√†y sneaker tr·∫Øng",
    img: "https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&w=400&q=80",
    price: 499000,
    status: "ƒêang b√°n"
  }
];

// Th√™m d·ªØ li·ªáu ƒë∆°n h√†ng m·∫´u
const demoOrders = [
  {
    id: 1,
    customer: 'Nguy·ªÖn VƒÉn A',
    items: [0, 2], // index s·∫£n ph·∫©m
    total: 199000 + 499000,
    status: 'ƒê√£ thanh to√°n',
    date: '2024-06-01'
  },
  {
    id: 2,
    customer: 'Tr·∫ßn Th·ªã B',
    items: [1],
    total: 299000,
    status: 'Ch·ªù thanh to√°n',
    date: '2024-06-02'
  }
];

let cart = [];

let currentLang = localStorage.getItem('lang') || navigator.language.slice(0,2) || 'vi';
if (!['vi','en','lo'].includes(currentLang)) currentLang = 'vi';

function setLang(lang) {
  currentLang = lang;
  localStorage.setItem('lang', lang);
  renderPage(currentPage);
}

let currentPage = 'home';

function navigate(page) {
  currentPage = page;
  renderPage(page);
}

function renderPage(page) {
  const t = translations[currentLang][page];
  let html = `<h2>${t.title}</h2><p>${t.desc}</p>`;
  if(page === 'shop') {
    html += `<div class="shop-banner" style="background:url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=900&q=80') center/cover;height:180px;border-radius:8px;"></div>
      <div class="shop-profile">
        <div class="shop-avatar"><img src="https://i.imgur.com/0y0y0y0.png" alt="Shop Avatar"></div>
        <div><h3>ABC Shop</h3><p>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (4.9/5)</p></div>
      </div>
      <div class="shop-products" style="display:flex;gap:20px;margin:30px 0;flex-wrap:wrap;">`;
    demoProducts.forEach((p, idx) => {
      html += `<div class='product-card'>
        <img src='${p.img}' alt='${p.name}'>
        <h4>${p.name}</h4>
        <div class='price'>${p.price.toLocaleString()}‚Ç´</div>
        <div class='status${p.status !== "ƒêang b√°n" ? " soldout" : ""}'>${p.status}</div>
        <button onclick='addToCart(${idx})' ${p.status!=="ƒêang b√°n"?"disabled":''}>Mua ngay</button>
      </div>`;
    });
    html += `</div>`;
  }
  if(page === 'register') {
    html += `<form class="shop-register-form">
      <label>T√™n Shop <input type="text" placeholder="Nh·∫≠p t√™n shop"></label><br>
      <label>M√¥ t·∫£ <textarea placeholder="M√¥ t·∫£ shop"></textarea></label><br>
      <label>Logo <input type="file"></label><br>
      <label>Lo·∫°i h√†ng h√≥a <input type="text" placeholder="V√≠ d·ª•: Th·ªùi trang, ƒêi·ªán t·ª≠..."></label><br>
      <button type="submit">ƒêƒÉng k√Ω</button>
    </form>`;
  }
  if(page === 'products') {
    html += `<table style='width:100%;border-collapse:collapse;margin-top:20px;'>
      <thead><tr style='background:#e3eafc;'><th>·∫¢nh</th><th>T√™n s·∫£n ph·∫©m</th><th>Gi√°</th><th>Tr·∫°ng th√°i</th><th>H√†nh ƒë·ªông</th></tr></thead><tbody>`;
    demoProducts.forEach((p, idx) => {
      html += `<tr style='border-bottom:1px solid #eee;'>
        <td><img src='${p.img}' alt='' style='width:60px;height:40px;object-fit:cover;border-radius:4px;'></td>
        <td>${p.name}</td>
        <td>${p.price.toLocaleString()}‚Ç´</td>
        <td>${p.status}</td>
        <td><button style='background:#ffb300;color:#fff;border:none;padding:4px 10px;border-radius:3px;cursor:pointer;'>S·ª≠a</button> <button style='background:#e53935;color:#fff;border:none;padding:4px 10px;border-radius:3px;cursor:pointer;'>Xo√°</button></td>
      </tr>`;
    });
    html += `</tbody></table>`;
  }
  if(page === 'cart') {
    if(demoOrders.length === 0) {
      html += `<div class='cart-demo'><p>Kh√¥ng c√≥ ƒë∆°n h√†ng n√†o.</p></div>`;
    } else {
      html += `<table class='order-table'>
        <thead><tr><th>M√£ ƒë∆°n</th><th>Kh√°ch h√†ng</th><th>S·∫£n ph·∫©m</th><th>T·ªïng ti·ªÅn</th><th>Tr·∫°ng th√°i</th><th>Ng√†y</th></tr></thead><tbody>`;
      demoOrders.forEach(order => {
        let statusClass = order.status === 'ƒê√£ thanh to√°n' ? 'status-paid' : (order.status === 'Ch·ªù thanh to√°n' ? 'status-pending' : 'status-cancel');
        let statusIcon = order.status === 'ƒê√£ thanh to√°n' ? '‚úîÔ∏è' : (order.status === 'Ch·ªù thanh to√°n' ? '‚è≥' : '‚ùå');
        html += `<tr onclick='showOrderDetail(${order.id})'>
          <td>#${order.id}</td>
          <td>${order.customer}</td>
          <td>${order.items.map(i=>demoProducts[i].name).join(', ')}</td>
          <td>${order.total.toLocaleString()}‚Ç´</td>
          <td class='${statusClass}'>${statusIcon} ${order.status}</td>
          <td>${order.date}</td>
        </tr>`;
      });
      html += `</tbody></table>`;
    }
  }
  if(page === 'ai') {
    html += `<div class='ai-demo' style='display:flex;gap:24px;align-items:center;margin-top:24px;'>
      <img src='${demoProducts[0].img}' style='width:160px;height:120px;object-fit:cover;border-radius:8px;box-shadow:0 2px 8px #0001;'>
      <div><b>M√¥ t·∫£ AI g·ª£i √Ω:</b><br><em>√Åo thun nam basic, ch·∫•t li·ªáu cotton tho√°ng m√°t, ph√π h·ª£p m·ªçi ho·∫°t ƒë·ªông h√†ng ng√†y. M√†u s·∫Øc tr·∫ª trung, d·ªÖ ph·ªëi ƒë·ªì.</em><br><button style='margin-top:10px;padding:6px 16px;background:#43a047;color:#fff;border:none;border-radius:4px;cursor:pointer;'>Ph√¢n t√≠ch s·∫£n ph·∫©m kh√°c</button></div>
    </div>`;
  }
  if(page === 'statistic') {
    const totalOrders = demoOrders.length;
    const soldProducts = demoOrders.reduce((sum, o) => sum + o.items.length, 0);
    const totalIncome = demoOrders.filter(o=>o.status==="ƒê√£ thanh to√°n").reduce((sum,o)=>sum+o.total,0);
    const customers = [...new Set(demoOrders.map(o=>o.customer))];
    const productCount = {};
    demoOrders.forEach(o=>o.items.forEach(i=>{productCount[i]=(productCount[i]||0)+1}));
    const bestSellers = Object.entries(productCount).sort((a,b)=>b[1]-a[1]).slice(0,3);
    html += `
    <div class='statistic-box'>
      <div class='statistic-item'><span class='icon'>üì¶</span><div><div class='value'>${totalOrders}</div><div class='label'>T·ªïng s·ªë ƒë∆°n</div></div></div>
      <div class='statistic-item'><span class='icon'>üí∞</span><div><div class='value'>${totalIncome.toLocaleString()}‚Ç´</div><div class='label'>T·ªïng doanh thu</div></div></div>
      <div class='statistic-item'><span class='icon'>üõí</span><div><div class='value'>${soldProducts}</div><div class='label'>S·∫£n ph·∫©m ƒë√£ b√°n</div></div></div>
    </div>
    <div class='statistic-box' style='flex-direction:column;gap:18px;'>
      <div><h3 style='margin-bottom:10px;'>Th·ªëng k√™ ng∆∞·ªùi d√πng</h3><div class='customer-list'>`;
    customers.forEach(c => {
      html += `<div class='customer-card'><span class='icon'>üë§</span><b>${c}</b></div>`;
    });
    html += `</div></div>
      <div><h3 style='margin-bottom:10px;margin-top:18px;'>Th·ªëng k√™ s·∫£n ph·∫©m b√°n ch·∫°y</h3><div class='bestseller-list'>`;
    bestSellers.forEach(([i,c]) => {
      html += `<div class='bestseller-card'><span class='icon'>üî•</span><b>${demoProducts[i].name}</b><span>ƒê√£ b√°n: ${c}</span></div>`;
    });
    html += `</div></div>
    </div>`;
  }
  document.getElementById('main-content').innerHTML = html;
}

function addToCart(idx) {
  cart.push(idx);
  currentPage = 'cart';
  renderPage('cart');
}

// H√†m xem chi ti·∫øt ƒë∆°n h√†ng
function showOrderDetail(orderId) {
  const order = demoOrders.find(o=>o.id===orderId);
  if(!order) return;
  let html = `<div class='order-detail'><h2>Chi ti·∫øt ƒë∆°n h√†ng #${order.id}</h2>`;
  html += `<div><b>Kh√°ch h√†ng:</b> ${order.customer}</div>`;
  html += `<div><b>Ng√†y ƒë·∫∑t:</b> ${order.date}</div>`;
  html += `<div><b>Tr·∫°ng th√°i:</b> ${order.status === 'ƒê√£ thanh to√°n' ? '‚úîÔ∏è' : (order.status === 'Ch·ªù thanh to√°n' ? '‚è≥' : '‚ùå')} <span class='${order.status === 'ƒê√£ thanh to√°n' ? 'status-paid' : (order.status === 'Ch·ªù thanh to√°n' ? 'status-pending' : 'status-cancel')}'>${order.status}</span></div>`;
  html += `<div><b>T·ªïng ti·ªÅn:</b> ${order.total.toLocaleString()}‚Ç´</div>`;
  html += `<div><b>S·∫£n ph·∫©m:</b><ul>`;
  order.items.forEach(i=>{
    const p = demoProducts[i];
    html += `<li>${p.name} - ${p.price.toLocaleString()}‚Ç´</li>`;
  });
  html += `</ul></div>`;
  html += `<button onclick="navigate('cart')">Quay l·∫°i danh s√°ch ƒë∆°n</button></div>`;
  document.getElementById('main-content').innerHTML = html;
}

// Kh·ªüi t·∫°o trang ƒë·∫ßu ti√™n
document.addEventListener('DOMContentLoaded', () => {
  renderPage(currentPage);
}); 